<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:t="http://myfaces.apache.org/tomahawk"
	xmlns:p="http://primefaces.org/ui">

<h:head>
</h:head>
<h:body>
	<ui:composition template="/template_michelle/template_michelle.xhtml">
		<ui:define name="conteudo">
			<p:outputPanel autoUpdate="true">
				<h:panelGroup id="mensagens" layout="block">
					<p:messages id="messages" showDetail="false" autoUpdate="true" />
						<p:outputPanel id="divMensagemErro" autoUpdate="false">
							<p:growl id="messages1" showDetail="false"   life="5000"
								autoUpdate="true" globalOnly="true" />
						
						</p:outputPanel>
				
				</h:panelGroup>
			</p:outputPanel>
			<section class="content">
				<!-- Default box -->
				<div class="box">
					<div class="box-header with-border">
						<h3 class="box-title">#{text['cadastro_estoque_label_title']}</h3>
						<div class="box-tools pull-right">
							<button class="btn btn-box-tool" data-widget="collapse"
								data-toggle="tooltip" title="Collapse">
								<i class="fa fa-minus"></i>
							</button>
							<button class="btn btn-box-tool" data-widget="remove"
								data-toggle="tooltip" title="Remove">
								<i class="fa fa-times"></i>
							</button>
						</div>
					</div>
					<h:form binding="#{lancamentoEstoqueMB.form}" id="formBody">
						<div class="box-body">
							<p:panel>
								<t:saveState value="#{lancamentoEstoqueMB.state}" />
								<t:saveState value="#{lancamentoEstoqueMB.estoque}" />
								<t:saveState value="#{lancamentoEstoqueMB.objetos}" />
								<!-- CONSULTAR CADASTROS -->
								<t:div id="blocoDePesquisa" rendered="#{lancamentoEstoqueMB.pesquisando}">
								
								<p:outputPanel id="pesquisa" rendered="#{lancamentoEstoqueMB.pesquisar}">
									<div class="row">									
										
										<div class="col-md-2" >
										<p:focus for="numeroNOta" />
											<p:outputLabel styleClass="bLabel" 
												value="#{text['cadastro_estoque_label_numero_nfe']}" for="numeroNOta" />												
											<p:inputText id="numeroNOta" 
												value="#{lancamentoEstoqueMB.estoque.numeroNota}" tabindex="3"
												label="#{text['cadastro_estoque_label_numero_nfe']}"
												required="false" styleClass="form-control JSsomenteNumeros"
												requiredMessage="#{text['cadastro_estoque_label_numero_nfe']}"													 
												maxlength="10" />
										</div>
										<!-- EAN -->
											<p:outputPanel styleClass="form-group col-md-2">															
												<p:outputLabel styleClass="bLabel" 
													value="#{text['cadastro_estoque_label_serie']}"  />	
												<p:inputText tabindex="4" value="#{lancamentoEstoqueMB.estoque.serie}"	 
																						
													styleClass="form-control JSsomenteNumeros" />																
											</p:outputPanel>
									
											<!-- Data Inicio-->
											<p:outputPanel  styleClass="form-group col-md-2">
											<p:focus for="dataInicio"></p:focus>
													<p:outputLabel styleClass="bLabel" for="dataInicio" value="#{text['cadastro_estoque_label_data_inicio']}"  />
													<p:calendar   tabindex="5"	id="dataInicio" disabled="#{lancamentoEstoqueMB.visualizando}" 
													value="#{lancamentoEstoqueMB.dataEntrada}"
													converter="dataConverter"
													navigator="true" 
													pattern="dd/MM/yyyy" locale="pt"
													styleClass="JSData form-control" 											
													label="#{text['cadastro_estoque_label_data_inicio']}"
													requiredMessage="#{text['cadastro_estoque_label_data_inicio']}"
													 required="false">											
													</p:calendar>
											</p:outputPanel>
											
											<p:outputPanel  styleClass="form-group col-md-2">
											
													<p:outputLabel styleClass="bLabel"  value="#{text['cadastro_estoque_label_data_final']}"  />
													<p:calendar   tabindex="6"	id="dataFim" 
													value="#{lancamentoEstoqueMB.dataFim}"
													converter="dataConverter"
													navigator="true" 
													pattern="dd/MM/yyyy" locale="pt"
													styleClass="JSData form-control" 											
													label="#{text['cadastro_estoque_label_data_final']}"
													requiredMessage="#{text['cadastro_estoque_label_data_final']}"
													 required="false">											
													</p:calendar>
											</p:outputPanel>
											
											<!-- Pesquisa -->
											<p:outputPanel  styleClass="form-group col-md-2">
												<p:outputLabel styleClass="bLabel"
													value="#{text['cadastro_estoque_label_por_data']}" />
												<p:selectOneMenu styleClass="form-control width100"
												 required="false"
													value="#{lancamentoEstoqueMB.tipoConsulta}" tabindex="7"												
													requiredMessage="#{text['cadastro_estoque_label_por_data']}"
													filter="true">	
													<f:selectItem itemLabel="#{text['cadastro_estoque_label_select_data_entrada']}" itemValue="0"/>												
													<f:selectItem itemLabel="#{text['cadastro_estoque_label_select_data_emissao']}" itemValue="1"/>
																										
												</p:selectOneMenu>
											</p:outputPanel>
											
										</div>
										
										<div class="row">	
											
											<!-- Tipo -->
											<p:outputPanel  styleClass="form-group col-md-3">
												<p:outputLabel styleClass="bLabel"
													value="#{text['cadastro_estoque_label_tipo']}" />
												<p:selectOneMenu styleClass="form-control width100" 
													required="false"
													value="#{lancamentoEstoqueMB.tipoLancamento}" tabindex="8"												
													requiredMessage="#{text['cadastro_estoque_label_tipo']}"
													filter="true">
													<f:selectItem itemLabel="" />
													<f:selectItem itemLabel="#{text['cadastro_estoque_label_select_tipo_entrada']}" itemValue="1"/>
													<f:selectItem itemLabel="#{text['cadastro_estoque_label_select_tipo_avaria']}" itemValue="2"/>
													<f:selectItem itemLabel="#{text['cadastro_estoque_label_select_tipo_transferencia']}" itemValue="3"/>
													<f:selectItem itemLabel="#{text['cadastro_estoque_label_select_tipo_acerto_estoque']}" itemValue="4"/>													
												</p:selectOneMenu>
											</p:outputPanel>
											
											<p:outputPanel styleClass="form-group col-md-3">
												<p:outputLabel styleClass="bLabel"
													value="#{text['cadastro_estoque_label_local_estoque']}" />
												<p:selectOneMenu disabled="#{lancamentoEstoqueMB.visualizando}"
													value="#{lancamentoEstoqueMB.estoque.localEstoque}" tabindex="9"
													styleClass="form-control " 
													requiredMessage="#{text['cadastro_estoque_label_local_estoque']}"
													filter="true">
													
													<f:selectItems value="#{lancamentoEstoqueMB.listaLocalEstoque}"
														var="item" itemLabel="#{item.descricao.toUpperCase()}"
														itemValue="#{item}" />
													<f:converter converterId="localEstoqueConverter" />
												
												</p:selectOneMenu>
											</p:outputPanel>
										
									</div>
									</p:outputPanel>
									<p:outputPanel>
										<div class="row">
											<div class="col-md-7" />
											<div class="col-xs-12 col-md-5">
												
												<div class="col-md-5">
													<p:commandButton value="#{text['label.adicionar']}"
														ajax="false" process="@form" update="@form" tabindex="11"
														action="#{lancamentoEstoqueMB.prepararParaAdicionar}"
														styleClass="btn btn-block btn-success width100">
													</p:commandButton>
												</div>
												<div class="col-md-7">
													<p:commandButton value="#{text['label.consultar']}"
														action="#{lancamentoEstoqueMB.lista}" process="@form" update="@form"
														tabindex="10" ajax="false"
														styleClass="btn btn-block btn-primary width100">
													</p:commandButton>
												</div>
											</div>
										</div>
									</p:outputPanel>	
									<p:outputPanel styleClass="clear" />
									<hr />

									<p:dataTable id="tabela" value="#{lancamentoEstoqueMB.objetos}" styleClass="ajusta_coluna"
										var="item" paginator="true" lazy="true" rows="5" scrollable="true"
										paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"
									currentPageReportTemplate="Página {currentPage} de {totalPages}"
										rowClasses="odd, even" emptyMessage="#{text['table.empty']}">
										
										<p:column headerText="#{text['cadastro_estoque_label_select_data_entrada']}" styleClass="texto-align-center">
											<p:outputLabel value="#{item.data}"  >
												<f:converter converterId="dataConverter"></f:converter>
											</p:outputLabel>
										</p:column>
										<p:column headerText="#{text['cadastro_estoque_label_select_data_emissao']}" styleClass="texto-align-center">
											<p:outputLabel value="#{item.dataEmissao}"  >
												<f:converter converterId="dataConverter"></f:converter>
											</p:outputLabel>
										</p:column>
										<p:column headerText="#{text['cadastro_estoque_label_tipo']}" styleClass="texto-align-center">
											<p:outputLabel value="#{lancamentoEstoqueMB.tipoMovimento(item.tipoLancamento)}"></p:outputLabel>
										</p:column>
										<p:column headerText="#{text['cadastro_estoque_label_numero_nfe']}" styleClass="texto-align-center">
											<p:outputLabel value="#{item.numeroNota}"  />
										</p:column>
										<p:column headerText="#{text['cadastro_estoque_label_serie']}" styleClass="texto-align-center">
											<p:outputLabel value="#{item.serie}"  />
										</p:column>
										<p:column headerText="#{text['cadastro_estoque_label_numero_itens']}" styleClass="texto-align-center">
											<p:outputLabel value="#{item.qtdProdutos}"  />
										</p:column>
										<p:column headerText="#{text['cadastro_estoque_label_valor_total']}" styleClass="texto-align-rigth">
											<p:outputLabel value="#{item.valorTotal}"   >
												<f:converter converterId="mascaraValorBigDecimalConverter"></f:converter>
											</p:outputLabel>	
										</p:column>
										
										<p:column headerText="#{text['cadastro_estoque_label_confirmacao']}" styleClass="texto-align-center">
											<p:outputLabel value="#{item.confirmarFinalizacao==true?'Sim':'Não'}"   />										 
										</p:column>
			
										<p:column headerText="Ações">
											<div class="row col-md-12">
											<div class="btn-group">
											<p:menuButton value="#{text['label.opcao']}" >
										        <p:menuitem value="#{text['label.visualizar']}"  icon="ui-icon-document" 
										        actionListener="#{lancamentoEstoqueMB.prepararVisualizar(item)}" process="@this" update="@form messages"/>
										       	 <p:separator />
										        <p:menuitem value="#{text['label.editar']}" icon="ui-icon-disk"
										        actionListener="#{lancamentoEstoqueMB.prepararAlterar(item)}" process="@this" update="@form messages"/>
										       
										    </p:menuButton>
											</div>
											</div>
										</p:column>
									</p:dataTable>
									
									<div class="row">
											<div class="form-group col-md-2 aDireita">	
												<p:commandButton value="#{text['label.relatorio']}"
													title="#{text['label.relatorio']}" 
													 tabindex="102"
													process="@this"	ajax="false"										
													update=":mensagens "
													oncomplete="PrimeFaces.monitorDownload(showStatus,hideStatus)"												
													styleClass="btn btn-primary width100">												
													<p:fileDownload	value="#{lancamentoEstoqueMB.emitirLancamentos}">
														
													</p:fileDownload>
												</p:commandButton>									
											</div>
									
									</div>

								</t:div>
								<!-- FIM CONSULTAR CADASTROS -->
								<!-- EDICAO DE CADASTROS -->
								<t:div id="blocoDeEdicao"
									rendered="#{not lancamentoEstoqueMB.pesquisando}">
									<p:outputPanel id="dialogs" >
										<!-- Dialog Pesquisa produtos -->
											<p:dialog 
													widgetVar="dialogListagemProdutos"  rendered="#{lancamentoEstoqueMB.dialog==true}"
													  showEffect="pop" 
													  header="#{text['cadastro_estoque_label_produto_descricao']}" 
													  styleClass="width33" 
													 	modal="true" closable="true" closeOnEscape="true"
														 >
													<p:outputPanel styleClass="row">		
																								
														<!-- EAN -->
														<!-- <p:outputPanel styleClass="form-group col-md-5">
															<p:focus for="dialogEAN" />	
															<p:outputLabel styleClass="bLabel"  for="dialogEAN"
																value="#{text['cadastro_estoque_label_dialog_produto_ean']}"  />	
															<p:inputText tabindex="57" value="#{lancamentoEstoqueMB.ean}"	 id="dialogEAN"												
															styleClass="width100">
																														
															</p:inputText>																
														</p:outputPanel>-->
														<!-- Descrição -->
														<p:outputPanel styleClass="form-group col-md-7">
														<p:focus for="produtoDescricao" />	
															<p:outputLabel styleClass="bLabel" for="produtoDescricao"
																value="#{text['cadastro_estoque_label_dialog_produto_descricao']}"  />	
															<p:inputText tabindex="58" value="#{lancamentoEstoqueMB.descricao}"	id="produtoDescricao"												
															styleClass="width100">	
																												
															</p:inputText>																
														</p:outputPanel>														
													
														<p:outputPanel styleClass="form-group col-md-2" />
														<p:outputPanel styleClass="form-group col-md-3 aDireita" >
															<p:commandButton value="#{text['label.consultar']}"
																tabindex="59" 																
																styleClass="btn btn-success width100"
																process="@this   :formBody:produtoDescricao :formBody:tabelaProdutosListagem"																
																update=":mensagens :formBody:tabelaProdutosListagem" 	/>
														
														</p:outputPanel>	
													</p:outputPanel>
													<p />
													
												<p:outputPanel styleClass="row">
											
													<p:dataTable id="tabelaProdutosListagem" styleClass="width100"
														widgetVar="tabelaProdutosListagem"
														selection="#{lancamentoEstoqueMB.produtosSelecionados}" rowKey="#{item.id}"
														value="#{lancamentoEstoqueMB.listaProdutos}" var="item"
														tabindex="32"				
														 paginator="true" 	rows="6"												
														emptyMessage="#{text['table.empty']}">	
														
														<p:column selectionMode="multiple" style="width:30px;"  >
														
														</p:column>
														<p:column headerText="#{text['cadastro_estoque_label_dialog_produto_codigo_produto']}" align="center" >
															<p:outputLabel value="#{item.codigoProduto}"  />
														</p:column>
														<p:column headerText="#{text['cadastro_estoque_label_dialog_produto_descricao']}" align="center" >
															<p:outputLabel value="#{item.descricao}"  />
														</p:column>
														<p:column headerText="#{text['cadastro_estoque_label_dialog_produto_ean']}" align="center" >
															<p:outputLabel value="#{item.ean}"  />
														</p:column>
													</p:dataTable>
													
													
													
												</p:outputPanel>
												
												<p:outputPanel styleClass="row">
													
													<div class="col-md-5" />
													<div class="col-xs-10 col-md-10">
													
														<div class="col-md-4">		
															<p:commandButton value="#{text['label.selecionar']}"
																tabindex="59" 																
																styleClass="btn btn-success width100"
																process="@this :formBody:tabelaProdutosListagem"
																actionListener="#{lancamentoEstoqueMB.salvarProdutos()}"
																update=":mensagens :formBody:produto :formBody:listagemProdutos :formBody:tabelaProdutosListagem" 
																/>
															
														</div>
														
														<div class="col-md-4">		
															<p:commandButton value="#{text['label.salvar']}"
																tabindex="60" 																
																styleClass="btn btn-success width100"
																process="@this :formBody:tabelaProdutosListagem"
																actionListener="#{lancamentoEstoqueMB.salvarProdutosSelecionados()}"
																update=":mensagens :formBody:listagemProdutos" 
																oncomplete="PF('dialogListagemProdutos').hide();"/>															
														</div>
														
														<div class="col-md-4">
															<p:commandButton value="#{text['label.limpar']}"
																tabindex="61" 																
																styleClass="btn btn-success width100"
																process="@this"
																actionListener="#{lancamentoEstoqueMB.limparDadosDialog}"
																update=":mensagens :formBody:tabelaProdutosListagem :formBody:produtoDescricao" 
																/>
														</div>
													</div>	
												</p:outputPanel>
											
											
											</p:dialog>
										
											
							
										<p:dialog 
											showEffect="pop" header="Impostos"  rendered="#{lancamentoEstoqueMB.dialog==true}"
											styleClass="width30" widgetVar="dialogProdutoNFE"  
											modal="true" closable="true" closeOnEscape="true" >
												
											<p:outputPanel id="impostos"  >	
												<div class="row">
												
													<div class="form-group col-md-3">
														<p:focus for="ncm" />
														<p:outputLabel value="#{text['cadastro_estoque_label_ncm']}" for="ncm"></p:outputLabel>
														<p:inputText  tabindex="90"	disabled="#{lancamentoEstoqueMB.visualizando}" 
																label="#{text['cadastro_estoque_label_ncm']}"
																required="true" id="ncm"
																value="#{lancamentoEstoqueMB.estoqueProdutoSelecionado.ncm}" 
																styleClass="form-control JSsomenteNumeros  "																										
																requiredMessage="#{text['cadastro_estoque_label_ncm']}"	>														
																</p:inputText>
													</div>
												
												
													<div class="form-group col-md-3">
															<p:outputLabel value="#{text['cadastro_estoque_label_cst']}"></p:outputLabel>
															<p:inputText  tabindex="91"	disabled="#{lancamentoEstoqueMB.visualizando}" 
																label="#{text['cadastro_estoque_label_cst']}"
																required="true" 
																value="#{lancamentoEstoqueMB.estoqueProdutoSelecionado.cst}" 
																styleClass="form-control JSsomenteNumeros  "																										
																requiredMessage="#{text['cadastro_estoque_label_cst']}"	>														
																</p:inputText>
													</div>
													
													<div class="form-group col-md-3">
														<p:outputLabel value="#{text['cadastro_estoque_label_cfop']}"></p:outputLabel>
														<p:inputText  tabindex="92"	disabled="#{lancamentoEstoqueMB.visualizando}" 
																	label="#{text['cadastro_estoque_label_cfop']}"
																	required="true" 
																	value="#{lancamentoEstoqueMB.estoqueProdutoSelecionado.cfop}" 
																	styleClass="form-control JSsomenteNumeros  "																										
																	requiredMessage="#{text['cadastro_estoque_label_cfop']}"	>														
																	</p:inputText>
													</div>
													
											</div>
											
											<div class="row">
												
														
														
														<div class="form-group col-md-3">
															<p:outputLabel value="#{text['cadastro_estoque_label_bc_icms']}"></p:outputLabel>
															<p:inputText  tabindex="97"	disabled="#{lancamentoEstoqueMB.visualizando}" 
																label="#{text['cadastro_estoque_label_bc_icms']}"
																required="true"  
																value="#{lancamentoEstoqueMB.estoqueProdutoSelecionado.bcICMS}" 
																styleClass="form-control JSvalorMoeda width100"	
																converter="mascaraValorDecimalConverter"											
																requiredMessage="#{text['cadastro_estoque_label_bc_icms']}"												
																/>
														</div>
														
														<div class="form-group col-md-3">
															<p:outputLabel value="#{text['cadastro_estoque_label_icms']}"></p:outputLabel>
															<p:inputText  tabindex="98"	disabled="#{lancamentoEstoqueMB.visualizando}" 
																label="#{text['cadastro_estoque_label_icms']}"
																required="true" 
																value="#{lancamentoEstoqueMB.estoqueProdutoSelecionado.ICMS}" 
																styleClass="form-control JSvalorMoeda width100"	
																converter="mascaraValorDecimalConverter"											
																requiredMessage="#{text['cadastro_estoque_label_icms']}"												
																/>
														</div>

														<div class="form-group col-md-3">
															<p:outputLabel value="#{text['cadastro_estoque_label_bc_st']}"></p:outputLabel>
															 <p:inputText  tabindex="99"	disabled="#{lancamentoEstoqueMB.visualizando}" 
																label="#{text['cadastro_estoque_label_bc_st']}"
																required="true"  
																value="#{lancamentoEstoqueMB.estoqueProdutoSelecionado.bcST}" 
																styleClass="form-control JSvalorMoeda width100"	
																converter="mascaraValorDecimalConverter"											
																requiredMessage="#{text['cadastro_estoque_label_bc_st']}"												
																/>
														</div>
												
												</div>		 
												
											
												<div class="row">
												
														
														<div class="form-group col-md-3">
															<p:outputLabel value="#{text['cadastro_estoque_label_st']}"></p:outputLabel>
															 <p:inputText  tabindex="100"	disabled="#{lancamentoEstoqueMB.visualizando}" 
																label="#{text['cadastro_estoque_label_st']}"
																required="true"  
																value="#{lancamentoEstoqueMB.estoqueProdutoSelecionado.st}" 
																styleClass="form-control JSvalorMoeda width100"	
																converter="mascaraValorDecimalConverter"											
																requiredMessage="#{text['cadastro_estoque_label_st']}"												
																/>
														</div>
												
														
														<div class="form-group col-md-3">
															<p:outputLabel value="#{text['cadastro_estoque_label_ipi']}"></p:outputLabel>
															 <p:inputText  tabindex="101"	disabled="#{lancamentoEstoqueMB.visualizando}" 
																label="#{text['cadastro_estoque_label_ipi']}"
																required="true"  
																value="#{lancamentoEstoqueMB.estoqueProdutoSelecionado.ipi}" 
																styleClass="form-control JSvalorMoeda width100"	
																converter="mascaraValorDecimalConverter"											
																requiredMessage="#{text['cadastro_estoque_label_ipi']}"												
																/>
														</div>
											
														
														<div class="form-group col-md-3">
															<p:outputLabel value="#{text['cadastro_estoque_label_pis']}" />
															<p:inputText  tabindex="102"	disabled="#{lancamentoEstoqueMB.visualizando}" 
																label="#{text['cadastro_estoque_label_pis']}"
																required="true"  
																value="#{lancamentoEstoqueMB.estoqueProdutoSelecionado.pis}" 
																styleClass="form-control JSvalorMoeda width100"	
																converter="mascaraValorDecimalConverter"											
																requiredMessage="#{text['cadastro_estoque_label_pis']}"												
																/>
														</div>
											
														
												</div>		
	 
												<div class="row">
														
														
														
														
														<div class="form-group col-md-3">
															<p:outputLabel value="#{text['cadastro_estoque_label_cofins']}"></p:outputLabel>
															<p:inputText  tabindex="103"	disabled="#{lancamentoEstoqueMB.visualizando}" 
																label="#{text['cadastro_estoque_label_cofins']}"
																required="true"  
																value="#{lancamentoEstoqueMB.estoqueProdutoSelecionado.cofins}" 
																styleClass="form-control JSvalorMoeda width100"	
																converter="mascaraValorDecimalConverter"											
																requiredMessage="#{text['cadastro_estoque_label_cofins']}"												
																/>
														</div>
														
														<div class="form-group col-md-3">
															<p:outputLabel value="#{text['cadastro_estoque_label_aliquota_icms']}"></p:outputLabel>
															<p:inputText  tabindex="104"	disabled="#{lancamentoEstoqueMB.visualizando}" 
																label="#{text['cadastro_estoque_label_aliquota_icms']}"
																required="true"  
																value="#{lancamentoEstoqueMB.estoqueProdutoSelecionado.aliquotaIcms}" 
																styleClass="form-control JSvalorMoeda width100"	
																converter="mascaraValorDecimalConverter"											
																requiredMessage="#{text['cadastro_estoque_label_aliquota_icms']}"												
																/>
														</div>
														
														<div class="form-group col-md-3">
															<p:outputLabel value="#{text['cadastro_estoque_label_aliquota_ipi']}"></p:outputLabel>
															<p:inputText  tabindex="104"	disabled="#{lancamentoEstoqueMB.visualizando}" 
																label="#{text['cadastro_estoque_label_aliquota_ipi']}"
																required="true"  
																value="#{lancamentoEstoqueMB.estoqueProdutoSelecionado.aliquotaIpi}" 
																styleClass="form-control JSvalorMoeda width100"	
																converter="mascaraValorDecimalConverter"											
																requiredMessage="#{text['cadastro_estoque_label_aliquota_ipi']}"												
																/>
														</div>
												</div>		
												
											
											</p:outputPanel>	
										
											<div class="row">
														<div class="col-md-4">		
															<p:commandButton value="#{text['label.salvar']}"
																tabindex="106" 																
																styleClass="btn btn-success width100"
																ajax="true"
																process="@this :formBody:impostos"
																actionListener="#{lancamentoEstoqueMB.salvarEstoqueProdutoSelecionado()}"
																update=":mensagens" 
																onsuccess="PF('dialogProdutoNFE').hide();"/>															
														</div>
														
											</div>
										</p:dialog>
										
									</p:outputPanel>	
									<div class="row">
											<!-- Data -->
											<p:outputPanel  styleClass="form-group col-md-2">
											
													<p:outputLabel styleClass="bLabel"  value="#{text['cadastro_estoque_label_data']}"  />
													<p:calendar   tabindex="20"	id="data" disabled="true" 
													
													value="#{lancamentoEstoqueMB.estoque.data}"
													converter="dataConverter"
													navigator="true" 
													pattern="dd/MM/yyyy" locale="pt"
													styleClass="JSData form-control" 											
													label="#{text['cadastro_estoque_label_data']}"
													requiredMessage="#{text['cadastro_estoque_label_data']}"
													 required="true">											
													</p:calendar>
											</p:outputPanel>
											<!-- Tipo -->
											<p:outputPanel  styleClass="form-group col-md-3">
											<p:focus for="tipoLancamento"></p:focus>
												<p:outputLabel styleClass="bLabel" for="tipoLancamento"
													value="#{text['cadastro_estoque_label_tipo']}" />
												<p:selectOneMenu styleClass="form-control width100" id="tipoLancamento"
													disabled="#{lancamentoEstoqueMB.visualizando}" required="true"
													value="#{lancamentoEstoqueMB.estoque.tipoLancamento}" tabindex="20"												
													requiredMessage="#{text['cadastro_estoque_label_tipo']}"
													filter="true">
													 
													<f:selectItem itemLabel="#{text['cadastro_estoque_label_select_tipo_entrada']}" itemValue="1"/>													
													<f:selectItem itemLabel="#{text['cadastro_estoque_label_select_tipo_avaria']}" itemValue="2"/>
													<f:selectItem itemLabel="#{text['cadastro_estoque_label_select_tipo_transferencia']}" itemValue="3"/>
													<f:selectItem itemLabel="#{text['cadastro_estoque_label_select_tipo_acerto_estoque']}" itemValue="4"/>													
												</p:selectOneMenu>
											</p:outputPanel>
											
											<p:outputPanel styleClass="form-group col-md-3">
												<p:outputLabel styleClass="bLabel"
													value="#{text['cadastro_estoque_label_local_estoque']}" />
												<p:selectOneMenu disabled="#{lancamentoEstoqueMB.visualizando}"
													value="#{lancamentoEstoqueMB.estoque.localEstoque}" tabindex="21"
													styleClass="form-control width100" id="localEstoque"
													requiredMessage="#{text['cadastro_estoque_label_local_estoque']}"
													filter="true">
													
													<f:selectItems value="#{lancamentoEstoqueMB.listaLocalEstoque}"
														var="item" itemLabel="#{item.descricao.toUpperCase()}"
														itemValue="#{item}" />
													<f:converter converterId="localEstoqueConverter" />
												
												</p:selectOneMenu>
											</p:outputPanel>
										
									</div>
									
									<div class="row">
											<!-- numero de itens -->
											<div class="form-group col-md-2" >										
												<p:outputLabel styleClass="bLabel" 
													value="#{text['cadastro_estoque_label_numero_itens']}"  />												
												<p:inputText  
													value="#{lancamentoEstoqueMB.estoque.produtos.size()}" tabindex="22"
													label="#{text['cadastro_estoque_label_numero_itens']}"
													required="false" styleClass="form-control" disabled="true"
													requiredMessage="#{text['cadastro_estoque_label_numero_itens']}"													
													
													/>
											
											</div>
											<!-- valor total -->
											<div class="form-group col-md-2" >										
												<p:outputLabel styleClass="bLabel" 
													value="#{text['cadastro_estoque_label_valor_total']}"  />												
												<p:inputText  
													value="#{lancamentoEstoqueMB.estoque.valorTotal}" tabindex="23" disabled="true"
													label="#{text['cadastro_estoque_label_valor_total']}"
													required="false" styleClass="form-control JSvalorMoeda"
													requiredMessage="#{text['cadastro_estoque_label_valor_total']}"													
													
													/>											
											</div>	
											<!-- observações -->
											<div class="form-group col-md-6">
													<p:outputLabel styleClass="bLabel" 
													value="#{text['cadastro_estoque_label_observacoes']}"  />												
													<p:inputText 
														value="#{lancamentoEstoqueMB.estoque.observacoes}" tabindex="24"
														label="#{text['cadastro_estoque_label_observacoes']}"
														required="false" styleClass="form-control"
														requiredMessage="#{text['cadastro_estoque_label_observacoes']}"
														
														disabled="#{lancamentoEstoqueMB.visualizando}"
														
														maxlength="200" />											
											</div>
									</div>
									
									<div class="row">
									
										<p:fieldset legend="#{text['cadastro_estoque_label_fieldset_dados_nfe_title']}">
										
											<div class="row">
												<!-- número da nota -->
												<div class="form-group col-md-2">
														<p:outputLabel styleClass="bLabel" 
														value="#{text['cadastro_estoque_label_numero_nfe']}"  />												
														<p:inputText 
															value="#{lancamentoEstoqueMB.estoque.numeroNota}" tabindex="25"
															label="#{text['cadastro_estoque_label_numero_nfe']}"
															required="true" styleClass="form-control JSsomenteNumeros"
															requiredMessage="#{text['cadastro_estoque_label_numero_nfe']}"															
															disabled="#{lancamentoEstoqueMB.visualizando}"															
															maxlength="10" />	
												
												</div>
												<!-- número da nota -->
												<div class="form-group col-md-2">
														<p:outputLabel styleClass="bLabel" 
														value="#{text['cadastro_estoque_label_serie']}"  />												
														<p:inputText 
															value="#{lancamentoEstoqueMB.estoque.serie}" tabindex="26"
															label="#{text['cadastro_estoque_label_serie']}"
															required="true" styleClass="form-control JSsomenteNumeros"
															requiredMessage="#{text['cadastro_estoque_label_serie']}"															
															disabled="#{lancamentoEstoqueMB.visualizando}"															
															maxlength="10" />	
												
												</div>
											
													<!-- Data Emissão -->
												<p:outputPanel  styleClass="form-group col-md-2">
															<p:outputLabel value="#{text['cadastro_estoque_label_data_emissao']}"  />
															<p:calendar   tabindex="27"	id="dataEmissao" disabled="#{lancamentoEstoqueMB.visualizando}" 
																value="#{lancamentoEstoqueMB.estoque.dataEmissao}"
																converter="dataConverter"
																navigator="true" 
																pattern="dd/MM/yyyy" locale="pt"
																styleClass="JSData form-control" 											
																label="#{text['cadastro_estoque_label_data_emissao']}"
																requiredMessage="#{text['cadastro_estoque_label_data_emissao']}"
																 required="true">											
															</p:calendar>
													</p:outputPanel>
													<!-- valor adicional -->
												<p:outputPanel styleClass="form-group col-md-2" >
														<p:outputLabel value="#{text['cadastro_estoque_label_valor_adicional']}"  />
														<p:inputText  tabindex="28"	disabled="#{lancamentoEstoqueMB.visualizando}" 
															label="#{text['cadastro_estoque_label_valor_adicional']}" required="false" 
															value="#{lancamentoEstoqueMB.estoque.valorAdicional}" styleClass="form-control JSvalorMoeda width100"	
															converter="mascaraValorBigDecimalConverter"											
															requiredMessage="#{text['cadastro_estoque_label_valor_adicional']}"												
															/>
											</p:outputPanel>
											</div>
										</p:fieldset>
									
									</div>
									
										<p:outputPanel id="cadastroProduto" >
										<p />
										<p />
											<p:outputPanel rendered="#{lancamentoEstoqueMB.cadProduto==true}" styleClass="row cadProdutos" >
											<!--<ui:include src="cad_produto.xhtml"></ui:include>-->
											</p:outputPanel>
											
											
										</p:outputPanel>
										
										<p />
										<p />
								
								
									<div class="row">
										
									
										<p:fieldset id="produto" legend="#{text['cadastro_estoque_label_fieldset_produtos_title']}">
										
											<div class="col-md-6" />
												<div class="col-xs-13 col-md-3">
													<div class="form-group" >		
															<p:commandButton value="#{text['label.adicionar']}" 
															disabled="#{lancamentoEstoqueMB.visualizando}"
																ajax="true" 
																process="@this :formBody:tabelaProdutosListagem :formBody:listagemProdutos" 
																action="#{lancamentoEstoqueMB.abrirDialogProduto}"
																update="produto :formBody:listagemProdutos   :formBody:produtoDescricao :formBody:dialogs :formBody:botaoSalvar :formBody:botaoAtualizar :formBody:tabelaProdutosListagem" tabindex="80"	
																oncomplete="PF('dialogListagemProdutos').show();"															
																styleClass="btn btn-block btn-success width100">
															</p:commandButton>
													</div>																						
												</div>
												
												<!-- <div class="col-xs-13 col-md-3">
													<div class="form-group">
															<p:commandButton value="#{text['label.cadastrar']}" disabled="#{lancamentoEstoqueMB.visualizando}"															
																ajax="true" process="@this" update=":formBody:cadastroProduto :formBody:botaoSalvar :formBody:botaoAtualizar produto" 
																tabindex="81"																																
																styleClass="btn btn-block btn-success width100"
																actionListener="#{lancamentoEstoqueMB.cadastrarProduto()}">
																
															</p:commandButton>
													</div>		
												</div>	-->
												
												
												
											<div class="form-group col-md-12"> 
												
												
												<p:dataTable  id="listagemProdutos" 
													value="#{lancamentoEstoqueMB.estoque.produtos}" var="item"
												 	scrollable="true" scrollWidth="985"		
         											
												    emptyMessage="#{text['table.empty']}">	
												    													
													<p:column headerText="#{text['cadastro_estoque_label_codigo']}"  styleClass="texto-align-center">
														<p:outputLabel value="#{item.produto.codigoProduto}" />
													</p:column>
													<p:column headerText="#{text['cadastro_estoque_label_item']}"  styleClass="texto-align-center">
														<p:outputLabel value="#{item.produto.descricao}" />
													</p:column>
													
													
													<p:column headerText="#{text['cadastro_estoque_label_quantidade']}" styleClass="width9">
														<p:inputText  tabindex="82"	disabled="#{lancamentoEstoqueMB.visualizando}" 
															label="#{text['cadastro_estoque_label_quantidade']}"
															required="true" id="qtdCompra"
															value="#{item.qtdCompra}" 
															maxlength="6"
															converter="mascaraValorDecimalDuasCasasConverter" 
															styleClass="form-control JSsomenteNumeros"																										
															requiredMessage="#{text['cadastro_estoque_label_quantidade']}"												
															>
															<p:ajax event="change" process="@this" 
															update=":mensagens :formBody:listagemProdutos:valorCompra :formBody:listagemProdutos:valorTotal" listener="#{lancamentoEstoqueMB.validarQtdCompra(item)}"></p:ajax>
														</p:inputText>	
													</p:column>
													
													<p:column headerText="#{text['cadastro_estoque_label_unidade']}" styleClass="width16">
														<p:selectOneMenu disabled="#{lancamentoEstoqueMB.visualizando}"
																	value="#{item.unidadeSelecionado}" tabindex="82"
																	styleClass="form-control" required="true"		id="unidadeSelecionada"															
																	requiredMessage="#{text['cadastro_estoque_label_unidade']}"
																	filter="true">
																	<f:selectItem itemLabel="" />
																	<f:selectItems value="#{lancamentoEstoqueMB.retornoLista(item)}"
																		var="und" itemLabel="#{und}"
																		itemValue="#{und}" />																	
																<p:ajax event="change" process="@this :formBody:listagemProdutos:qtdCompra" 
															update=":mensagens :formBody:listagemProdutos:valorCompra :formBody:listagemProdutos:valorTotal" listener="#{lancamentoEstoqueMB.validarQtdCompra(item)}"></p:ajax>	
																</p:selectOneMenu>
													</p:column>
													<p:column headerText="#{text['cadastro_estoque_label_valor_de_compra']}" styleClass="width10">
														<p:inputText  tabindex="82"	disabled="#{lancamentoEstoqueMB.visualizando}" 
															label="#{text['cadastro_estoque_label_valor_de_compra']}"
															required="true" id="valorCompra"
															value="#{item.valorUnitario}" 
															styleClass="form-control JSvalorMoeda"	
															converter="mascaraValorBigDecimalConverter"											
															requiredMessage="#{text['cadastro_estoque_label_valor_adicional']}"																
															>
															<p:ajax event="change" process="@this :formBody:listagemProdutos:qtdCompra" 
															update=":mensagens :formBody:listagemProdutos:valorCompra :formBody:listagemProdutos:valorTotal" listener="#{lancamentoEstoqueMB.validarQtdCompra(item)}"></p:ajax>
															</p:inputText>
													</p:column>
													<p:column headerText="#{text['cadastro_estoque_label_valor_total']}" styleClass="width10">
														<p:inputText  tabindex="82"	disabled="#{lancamentoEstoqueMB.visualizando}" 
															label="#{text['cadastro_estoque_label_valor_total']}"
															required="true"  id="valorTotal"
															value="#{item.valorTotal}" 
															styleClass="form-control JSvalorMoeda "	
															converter="mascaraValorBigDecimalConverter"											
															requiredMessage="#{text['cadastro_estoque_label_valor_total']}"												
															/>
													</p:column>
													
													<p:column headerText="#{text['cadastro_estoque_label_saldo']}"  styleClass="texto-align-center width8">
														<p:outputLabel value="#{item.saldoEstoque}"></p:outputLabel>
													</p:column>
													
													<p:column headerText="#{text['cadastro_estoque_label_data_validade']}" styleClass="width10">
														<p:calendar   tabindex="82"	id="dataValidade" disabled="#{lancamentoEstoqueMB.visualizando}" 
																value="#{item.dataValidade}"
																converter="dataConverter"
																navigator="true"  
																pattern="dd/MM/yyyy" locale="pt"
																styleClass="JSData form-control" 											
																label="#{text['cadastro_estoque_label_data_validade']}"
																requiredMessage="#{text['cadastro_estoque_label_data_validade']}"
																 required="false">											
																</p:calendar>
													</p:column>
													
													
													<p:column styleClass="width5">
														<p:commandButton update=":formBody:impostos"
															 oncomplete="PF('dialogProdutoNFE').show();"
															 process="@this :formBody:listagemProdutos:qtdCompra :formBody:listagemProdutos:dataValidade :formBody:listagemProdutos:valorTotal"  tabindex="82"
															 ajax="true"													 
															 action="#{lancamentoEstoqueMB.adicionarEstoqueProdutoSelecionado(item)}"															 
															 icon="ui-icon-search" title="View">
											                   
										                 </p:commandButton>
													
													</p:column>
													
													<p:column>
																						                 
														<p:commandButton value="#{text['label.remover']}"
															process="@this" update="listagemProdutos" ajax="true"
															action="#{lancamentoEstoqueMB.removerEstoqueProduto(item)}" 
															disabled="#{lancamentoEstoqueMB.visualizando}"
															tabindex="82"></p:commandButton>
													</p:column>
												</p:dataTable>
										
										
											</div>
											
												
											
										</p:fieldset>
									
									</div>
									
									
									<div class="row">
											<div class="col-md-7" />
									</div>
								
								
								
								
									<p:outputPanel>
										<div class="row">
											<div class="col-md-7" />
											<div class="col-xs-12 col-md-5">
												<div class="col-md-4">		
													<p:commandButton value="#{text['label.salvar']}"
														tabindex="130" action="#{lancamentoEstoqueMB.adiciona}"
														id="botaoSalvar" ajax="false"
														rendered="#{lancamentoEstoqueMB.adicionando==true}"
														disabled="#{lancamentoEstoqueMB.cadProduto==true}"
														styleClass="btn btn-success width100" process="@form"
														update="@form :mensagens" />
												
													<p:commandButton value="#{text['label.atualizar']}" tabindex="131"
														id="botaoAtualizar"
														action="#{lancamentoEstoqueMB.alterar}"
														rendered="#{lancamentoEstoqueMB.editando}" disabled="#{lancamentoEstoqueMB.cadProduto==true}"
														styleClass="btn btn-warning width100" process="@form"
														update="@form :mensagens" />
												</div>
												<p:outputPanel styleClass="col-md-4" rendered="#{lancamentoEstoqueMB.editando}">
													<p:commandButton value="#{text['label.confirmar']}" tabindex="132"
														id="botaConfirmar"
														action="#{lancamentoEstoqueMB.confirmarLancamento()}"
														rendered="#{lancamentoEstoqueMB.editando}" disabled="#{lancamentoEstoqueMB.cadProduto==true}"
														styleClass="btn btn-warning width100" process="@form"
														update="@form :mensagens" />
												</p:outputPanel>
												 
												
												<div class="col-md-4">
													<p:commandButton value="#{text['label.limpar']}" disabled="#{lancamentoEstoqueMB.visualizando and lancamentoEstoqueMB.cadProduto==true}"
														tabindex="133" action="#{lancamentoEstoqueMB.limpar}"														
														rendered="#{lancamentoEstoqueMB.adicionando}" 
														styleClass="btn btn-primary width100" process="@this"
														update="@form :mensagens" />
												</div>
												<div class="col-md-4">		
													<p:commandButton value="#{text['label.voltar']}"
														immediate="true" action="#{lancamentoEstoqueMB.voltar}"
														tabindex="134" styleClass="btn btn-primary width100" process="@this"
														update="@form :mensagens" />
												</div>
												
											</div>
										</div>
									</p:outputPanel>
								</t:div>
								<!-- FIM EDICAO DE CADASTROS -->
							</p:panel>
						</div>
						<!-- /.box-body -->
					</h:form>

				</div>
				<!-- /.box -->
			</section>
			<!-- /.content -->





		</ui:define>

	</ui:composition>

</h:body>

</html>